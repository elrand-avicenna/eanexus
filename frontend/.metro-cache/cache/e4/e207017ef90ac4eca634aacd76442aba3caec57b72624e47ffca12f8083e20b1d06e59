{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":131},"end":{"line":4,"column":39,"index":170}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useGameStore\", {\n    enumerable: true,\n    get: function () {\n      return useGameStore;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[4], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  const API_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const useGameStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    npcs: [],\n    affinities: [],\n    loading: false,\n    error: null,\n    initialize: async () => {\n      try {\n        set({\n          loading: true,\n          error: null\n        });\n\n        // Check if user exists in AsyncStorage\n        const storedUserId = await AsyncStorage.default.getItem('userId');\n        if (storedUserId) {\n          await get().loadUser(storedUserId);\n        }\n\n        // Initialize game data\n        await axios.default.post(`${API_URL}/api/init/game`);\n\n        // Load NPCs\n        await get().loadNPCs();\n        set({\n          loading: false\n        });\n      } catch (error) {\n        set({\n          loading: false,\n          error: error.message\n        });\n      }\n    },\n    createUser: async username => {\n      try {\n        set({\n          loading: true,\n          error: null\n        });\n        const response = await axios.default.post(`${API_URL}/api/user/create`, {\n          username\n        });\n        const user = response.data;\n        await AsyncStorage.default.setItem('userId', user.id);\n        set({\n          user,\n          loading: false\n        });\n\n        // Load affinities\n        await get().loadAffinities(user.id);\n      } catch (error) {\n        set({\n          loading: false,\n          error: error.message\n        });\n      }\n    },\n    loadUser: async userId => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/user/${userId}`);\n        set({\n          user: response.data\n        });\n\n        // Load affinities\n        await get().loadAffinities(userId);\n      } catch (error) {\n        set({\n          error: error.message\n        });\n      }\n    },\n    loadNPCs: async () => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/npcs`);\n        set({\n          npcs: response.data\n        });\n      } catch (error) {\n        set({\n          error: error.message\n        });\n      }\n    },\n    loadAffinities: async userId => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/affinity/${userId}`);\n        set({\n          affinities: response.data\n        });\n      } catch (error) {\n        set({\n          error: error.message\n        });\n      }\n    },\n    addFriend: async npcId => {\n      const {\n        user\n      } = get();\n      if (!user) return;\n      try {\n        await axios.default.post(`${API_URL}/api/affinity/${user.id}/${npcId}/friend`);\n\n        // Reload affinities\n        await get().loadAffinities(user.id);\n      } catch (error) {\n        set({\n          error: error.message\n        });\n      }\n    },\n    updateUserPosition: async (floor, room) => {\n      const {\n        user\n      } = get();\n      if (!user) return;\n      try {\n        await axios.default.put(`${API_URL}/api/user/${user.id}/position?floor=${floor}&room=${room}`);\n        set({\n          user: {\n            ...user,\n            current_floor: floor,\n            current_room: room\n          }\n        });\n      } catch (error) {\n        set({\n          error: error.message\n        });\n      }\n    }\n  }));\n});","lineCount":162,"map":[[12,2,56,0,"Object"],[12,8,56,0],[12,9,56,0,"defineProperty"],[12,23,56,0],[12,24,56,0,"exports"],[12,31,56,0],[13,4,56,0,"enumerable"],[13,14,56,0],[14,4,56,0,"get"],[14,7,56,0],[14,18,56,0,"get"],[14,19,56,0],[15,6,56,0],[15,13,56,0,"useGameStore"],[15,25,56,0],[16,4,56,0],[17,2,56,0],[18,2,161,4],[18,6,161,4,"_expoVirtualEnv"],[18,21,161,4],[18,24,161,4,"require"],[18,31,161,4],[18,32,161,4,"_dependencyMap"],[18,46,161,4],[19,2,1,0],[19,6,1,0,"_zustand"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,2,0],[20,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,42,2,0],[20,45,2,0,"require"],[20,52,2,0],[20,53,2,0,"_dependencyMap"],[20,67,2,0],[21,2,2,0],[21,6,2,0,"AsyncStorage"],[21,18,2,0],[21,21,2,0,"_interopDefault"],[21,36,2,0],[21,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,73,2,0],[22,2,3,0],[22,6,3,0,"_axios"],[22,12,3,0],[22,15,3,0,"require"],[22,22,3,0],[22,23,3,0,"_dependencyMap"],[22,37,3,0],[23,2,3,0],[23,6,3,0,"axios"],[23,11,3,0],[23,14,3,0,"_interopDefault"],[23,29,3,0],[23,30,3,0,"_axios"],[23,36,3,0],[24,2,4,0],[24,6,4,0,"_expoConstants"],[24,20,4,0],[24,23,4,0,"require"],[24,30,4,0],[24,31,4,0,"_dependencyMap"],[24,45,4,0],[25,2,4,0],[25,6,4,0,"Constants"],[25,15,4,0],[25,18,4,0,"_interopDefault"],[25,33,4,0],[25,34,4,0,"_expoConstants"],[25,48,4,0],[26,2,6,0],[26,8,6,6,"API_URL"],[26,15,6,13],[26,18,6,16,"Constants"],[26,27,6,25],[26,28,6,25,"default"],[26,35,6,25],[26,36,6,26,"expoConfig"],[26,46,6,36],[26,48,6,38,"extra"],[26,53,6,43],[26,55,6,45,"EXPO_PUBLIC_BACKEND_URL"],[26,78,6,68],[26,82,6,68,"_expoVirtualEnv"],[26,97,6,68],[26,98,6,68,"env"],[26,101,6,68],[26,102,6,68,"EXPO_PUBLIC_BACKEND_URL"],[26,125,6,107],[27,2,56,7],[27,8,56,13,"useGameStore"],[27,20,56,25],[27,23,56,28],[27,27,56,28,"create"],[27,35,56,34],[27,36,56,34,"create"],[27,42,56,34],[27,44,56,46],[27,45,56,47,"set"],[27,48,56,50],[27,50,56,52,"get"],[27,53,56,55],[27,59,56,61],[28,4,57,2,"user"],[28,8,57,6],[28,10,57,8],[28,14,57,12],[29,4,58,2,"npcs"],[29,8,58,6],[29,10,58,8],[29,12,58,10],[30,4,59,2,"affinities"],[30,14,59,12],[30,16,59,14],[30,18,59,16],[31,4,60,2,"loading"],[31,11,60,9],[31,13,60,11],[31,18,60,16],[32,4,61,2,"error"],[32,9,61,7],[32,11,61,9],[32,15,61,13],[33,4,63,2,"initialize"],[33,14,63,12],[33,16,63,14],[33,22,63,14,"initialize"],[33,23,63,14],[33,28,63,26],[34,6,64,4],[34,10,64,8],[35,8,65,6,"set"],[35,11,65,9],[35,12,65,10],[36,10,65,12,"loading"],[36,17,65,19],[36,19,65,21],[36,23,65,25],[37,10,65,27,"error"],[37,15,65,32],[37,17,65,34],[38,8,65,39],[38,9,65,40],[38,10,65,41],[40,8,67,6],[41,8,68,6],[41,14,68,12,"storedUserId"],[41,26,68,24],[41,29,68,27],[41,35,68,33,"AsyncStorage"],[41,47,68,45],[41,48,68,45,"default"],[41,55,68,45],[41,56,68,46,"getItem"],[41,63,68,53],[41,64,68,54],[41,72,68,62],[41,73,68,63],[42,8,70,6],[42,12,70,10,"storedUserId"],[42,24,70,22],[42,26,70,24],[43,10,71,8],[43,16,71,14,"get"],[43,19,71,17],[43,20,71,18],[43,21,71,19],[43,22,71,20,"loadUser"],[43,30,71,28],[43,31,71,29,"storedUserId"],[43,43,71,41],[43,44,71,42],[44,8,72,6],[46,8,74,6],[47,8,75,6],[47,14,75,12,"axios"],[47,19,75,17],[47,20,75,17,"default"],[47,27,75,17],[47,28,75,18,"post"],[47,32,75,22],[47,33,75,23],[47,36,75,26,"API_URL"],[47,43,75,33],[47,59,75,49],[47,60,75,50],[49,8,77,6],[50,8,78,6],[50,14,78,12,"get"],[50,17,78,15],[50,18,78,16],[50,19,78,17],[50,20,78,18,"loadNPCs"],[50,28,78,26],[50,29,78,27],[50,30,78,28],[51,8,80,6,"set"],[51,11,80,9],[51,12,80,10],[52,10,80,12,"loading"],[52,17,80,19],[52,19,80,21],[53,8,80,27],[53,9,80,28],[53,10,80,29],[54,6,81,4],[54,7,81,5],[54,8,81,6],[54,15,81,13,"error"],[54,20,81,23],[54,22,81,25],[55,8,82,6,"set"],[55,11,82,9],[55,12,82,10],[56,10,82,12,"loading"],[56,17,82,19],[56,19,82,21],[56,24,82,26],[57,10,82,28,"error"],[57,15,82,33],[57,17,82,35,"error"],[57,22,82,40],[57,23,82,41,"message"],[58,8,82,49],[58,9,82,50],[58,10,82,51],[59,6,83,4],[60,4,84,2],[60,5,84,3],[61,4,86,2,"createUser"],[61,14,86,12],[61,16,86,14],[61,22,86,21,"username"],[61,30,86,37],[61,34,86,42],[62,6,87,4],[62,10,87,8],[63,8,88,6,"set"],[63,11,88,9],[63,12,88,10],[64,10,88,12,"loading"],[64,17,88,19],[64,19,88,21],[64,23,88,25],[65,10,88,27,"error"],[65,15,88,32],[65,17,88,34],[66,8,88,39],[66,9,88,40],[66,10,88,41],[67,8,90,6],[67,14,90,12,"response"],[67,22,90,20],[67,25,90,23],[67,31,90,29,"axios"],[67,36,90,34],[67,37,90,34,"default"],[67,44,90,34],[67,45,90,35,"post"],[67,49,90,39],[67,50,90,40],[67,53,90,43,"API_URL"],[67,60,90,50],[67,78,90,68],[67,80,90,70],[68,10,91,8,"username"],[69,8,92,6],[69,9,92,7],[69,10,92,8],[70,8,94,6],[70,14,94,12,"user"],[70,18,94,16],[70,21,94,19,"response"],[70,29,94,27],[70,30,94,28,"data"],[70,34,94,32],[71,8,95,6],[71,14,95,12,"AsyncStorage"],[71,26,95,24],[71,27,95,24,"default"],[71,34,95,24],[71,35,95,25,"setItem"],[71,42,95,32],[71,43,95,33],[71,51,95,41],[71,53,95,43,"user"],[71,57,95,47],[71,58,95,48,"id"],[71,60,95,50],[71,61,95,51],[72,8,97,6,"set"],[72,11,97,9],[72,12,97,10],[73,10,97,12,"user"],[73,14,97,16],[74,10,97,18,"loading"],[74,17,97,25],[74,19,97,27],[75,8,97,33],[75,9,97,34],[75,10,97,35],[77,8,99,6],[78,8,100,6],[78,14,100,12,"get"],[78,17,100,15],[78,18,100,16],[78,19,100,17],[78,20,100,18,"loadAffinities"],[78,34,100,32],[78,35,100,33,"user"],[78,39,100,37],[78,40,100,38,"id"],[78,42,100,40],[78,43,100,41],[79,6,101,4],[79,7,101,5],[79,8,101,6],[79,15,101,13,"error"],[79,20,101,23],[79,22,101,25],[80,8,102,6,"set"],[80,11,102,9],[80,12,102,10],[81,10,102,12,"loading"],[81,17,102,19],[81,19,102,21],[81,24,102,26],[82,10,102,28,"error"],[82,15,102,33],[82,17,102,35,"error"],[82,22,102,40],[82,23,102,41,"message"],[83,8,102,49],[83,9,102,50],[83,10,102,51],[84,6,103,4],[85,4,104,2],[85,5,104,3],[86,4,106,2,"loadUser"],[86,12,106,10],[86,14,106,12],[86,20,106,19,"userId"],[86,26,106,33],[86,30,106,38],[87,6,107,4],[87,10,107,8],[88,8,108,6],[88,14,108,12,"response"],[88,22,108,20],[88,25,108,23],[88,31,108,29,"axios"],[88,36,108,34],[88,37,108,34,"default"],[88,44,108,34],[88,45,108,35,"get"],[88,48,108,38],[88,49,108,39],[88,52,108,42,"API_URL"],[88,59,108,49],[88,72,108,62,"userId"],[88,78,108,68],[88,80,108,70],[88,81,108,71],[89,8,109,6,"set"],[89,11,109,9],[89,12,109,10],[90,10,109,12,"user"],[90,14,109,16],[90,16,109,18,"response"],[90,24,109,26],[90,25,109,27,"data"],[91,8,109,32],[91,9,109,33],[91,10,109,34],[93,8,111,6],[94,8,112,6],[94,14,112,12,"get"],[94,17,112,15],[94,18,112,16],[94,19,112,17],[94,20,112,18,"loadAffinities"],[94,34,112,32],[94,35,112,33,"userId"],[94,41,112,39],[94,42,112,40],[95,6,113,4],[95,7,113,5],[95,8,113,6],[95,15,113,13,"error"],[95,20,113,23],[95,22,113,25],[96,8,114,6,"set"],[96,11,114,9],[96,12,114,10],[97,10,114,12,"error"],[97,15,114,17],[97,17,114,19,"error"],[97,22,114,24],[97,23,114,25,"message"],[98,8,114,33],[98,9,114,34],[98,10,114,35],[99,6,115,4],[100,4,116,2],[100,5,116,3],[101,4,118,2,"loadNPCs"],[101,12,118,10],[101,14,118,12],[101,20,118,12,"loadNPCs"],[101,21,118,12],[101,26,118,24],[102,6,119,4],[102,10,119,8],[103,8,120,6],[103,14,120,12,"response"],[103,22,120,20],[103,25,120,23],[103,31,120,29,"axios"],[103,36,120,34],[103,37,120,34,"default"],[103,44,120,34],[103,45,120,35,"get"],[103,48,120,38],[103,49,120,39],[103,52,120,42,"API_URL"],[103,59,120,49],[103,70,120,60],[103,71,120,61],[104,8,121,6,"set"],[104,11,121,9],[104,12,121,10],[105,10,121,12,"npcs"],[105,14,121,16],[105,16,121,18,"response"],[105,24,121,26],[105,25,121,27,"data"],[106,8,121,32],[106,9,121,33],[106,10,121,34],[107,6,122,4],[107,7,122,5],[107,8,122,6],[107,15,122,13,"error"],[107,20,122,23],[107,22,122,25],[108,8,123,6,"set"],[108,11,123,9],[108,12,123,10],[109,10,123,12,"error"],[109,15,123,17],[109,17,123,19,"error"],[109,22,123,24],[109,23,123,25,"message"],[110,8,123,33],[110,9,123,34],[110,10,123,35],[111,6,124,4],[112,4,125,2],[112,5,125,3],[113,4,127,2,"loadAffinities"],[113,18,127,16],[113,20,127,18],[113,26,127,25,"userId"],[113,32,127,39],[113,36,127,44],[114,6,128,4],[114,10,128,8],[115,8,129,6],[115,14,129,12,"response"],[115,22,129,20],[115,25,129,23],[115,31,129,29,"axios"],[115,36,129,34],[115,37,129,34,"default"],[115,44,129,34],[115,45,129,35,"get"],[115,48,129,38],[115,49,129,39],[115,52,129,42,"API_URL"],[115,59,129,49],[115,76,129,66,"userId"],[115,82,129,72],[115,84,129,74],[115,85,129,75],[116,8,130,6,"set"],[116,11,130,9],[116,12,130,10],[117,10,130,12,"affinities"],[117,20,130,22],[117,22,130,24,"response"],[117,30,130,32],[117,31,130,33,"data"],[118,8,130,38],[118,9,130,39],[118,10,130,40],[119,6,131,4],[119,7,131,5],[119,8,131,6],[119,15,131,13,"error"],[119,20,131,23],[119,22,131,25],[120,8,132,6,"set"],[120,11,132,9],[120,12,132,10],[121,10,132,12,"error"],[121,15,132,17],[121,17,132,19,"error"],[121,22,132,24],[121,23,132,25,"message"],[122,8,132,33],[122,9,132,34],[122,10,132,35],[123,6,133,4],[124,4,134,2],[124,5,134,3],[125,4,136,2,"addFriend"],[125,13,136,11],[125,15,136,13],[125,21,136,20,"npcId"],[125,26,136,33],[125,30,136,38],[126,6,137,4],[126,12,137,10],[127,8,137,12,"user"],[128,6,137,17],[128,7,137,18],[128,10,137,21,"get"],[128,13,137,24],[128,14,137,25],[128,15,137,26],[129,6,138,4],[129,10,138,8],[129,11,138,9,"user"],[129,15,138,13],[129,17,138,15],[130,6,140,4],[130,10,140,8],[131,8,141,6],[131,14,141,12,"axios"],[131,19,141,17],[131,20,141,17,"default"],[131,27,141,17],[131,28,141,18,"post"],[131,32,141,22],[131,33,141,23],[131,36,141,26,"API_URL"],[131,43,141,33],[131,60,141,50,"user"],[131,64,141,54],[131,65,141,55,"id"],[131,67,141,57],[131,71,141,61,"npcId"],[131,76,141,66],[131,85,141,75],[131,86,141,76],[133,8,143,6],[134,8,144,6],[134,14,144,12,"get"],[134,17,144,15],[134,18,144,16],[134,19,144,17],[134,20,144,18,"loadAffinities"],[134,34,144,32],[134,35,144,33,"user"],[134,39,144,37],[134,40,144,38,"id"],[134,42,144,40],[134,43,144,41],[135,6,145,4],[135,7,145,5],[135,8,145,6],[135,15,145,13,"error"],[135,20,145,23],[135,22,145,25],[136,8,146,6,"set"],[136,11,146,9],[136,12,146,10],[137,10,146,12,"error"],[137,15,146,17],[137,17,146,19,"error"],[137,22,146,24],[137,23,146,25,"message"],[138,8,146,33],[138,9,146,34],[138,10,146,35],[139,6,147,4],[140,4,148,2],[140,5,148,3],[141,4,150,2,"updateUserPosition"],[141,22,150,20],[141,24,150,22],[141,30,150,22,"updateUserPosition"],[141,31,150,29,"floor"],[141,36,150,42],[141,38,150,44,"room"],[141,42,150,56],[141,47,150,61],[142,6,151,4],[142,12,151,10],[143,8,151,12,"user"],[144,6,151,17],[144,7,151,18],[144,10,151,21,"get"],[144,13,151,24],[144,14,151,25],[144,15,151,26],[145,6,152,4],[145,10,152,8],[145,11,152,9,"user"],[145,15,152,13],[145,17,152,15],[146,6,154,4],[146,10,154,8],[147,8,155,6],[147,14,155,12,"axios"],[147,19,155,17],[147,20,155,17,"default"],[147,27,155,17],[147,28,155,18,"put"],[147,31,155,21],[147,32,155,22],[147,35,155,25,"API_URL"],[147,42,155,32],[147,55,155,45,"user"],[147,59,155,49],[147,60,155,50,"id"],[147,62,155,52],[147,81,155,71,"floor"],[147,86,155,76],[147,95,155,85,"room"],[147,99,155,89],[147,101,155,91],[147,102,155,92],[148,8,156,6,"set"],[148,11,156,9],[148,12,156,10],[149,10,156,12,"user"],[149,14,156,16],[149,16,156,18],[150,12,156,20],[150,15,156,23,"user"],[150,19,156,27],[151,12,156,29,"current_floor"],[151,25,156,42],[151,27,156,44,"floor"],[151,32,156,49],[152,12,156,51,"current_room"],[152,24,156,63],[152,26,156,65,"room"],[153,10,156,70],[154,8,156,72],[154,9,156,73],[154,10,156,74],[155,6,157,4],[155,7,157,5],[155,8,157,6],[155,15,157,13,"error"],[155,20,157,23],[155,22,157,25],[156,8,158,6,"set"],[156,11,158,9],[156,12,158,10],[157,10,158,12,"error"],[157,15,158,17],[157,17,158,19,"error"],[157,22,158,24],[157,23,158,25,"message"],[158,8,158,33],[158,9,158,34],[158,10,158,35],[159,6,159,4],[160,4,160,2],[161,2,161,0],[161,3,161,1],[161,4,161,2],[161,5,161,3],[162,0,161,4],[162,3]],"functionMap":{"names":["<global>","create$argument_0","initialize","createUser","loadUser","loadNPCs","loadAffinities","addFriend","updateUserPosition"],"mappings":"AAA;8CCuD;cCO;GDqB;cEE;GFkB;YGE;GHU;YIE;GJO;kBKE;GLO;aME;GNY;sBOE;GPU;EDC"},"hasCjsExports":false},"type":"js/module"}]}