{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":131},"end":{"line":4,"column":39,"index":170}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useGameStore\", {\n    enumerable: true,\n    get: function () {\n      return useGameStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  const API_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL;\n  const useGameStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    npcs: [],\n    affinities: [],\n    loading: false,\n    error: null,\n    initialize: async () => {\n      try {\n        set({\n          loading: true,\n          error: null\n        });\n\n        // Check if user exists in AsyncStorage\n        const storedUserId = await AsyncStorage.default.getItem('userId');\n        if (storedUserId) {\n          await get().loadUser(storedUserId);\n        }\n\n        // Initialize game data\n        await axios.default.post(`${API_URL}/api/init/game`);\n\n        // Load NPCs\n        await get().loadNPCs();\n        set({\n          loading: false\n        });\n      } catch (error) {\n        set({\n          loading: false,\n          error: error.message\n        });\n      }\n    },\n    createUser: async username => {\n      try {\n        set({\n          loading: true,\n          error: null\n        });\n        const response = await axios.default.post(`${API_URL}/api/user/create`, {\n          username\n        });\n        const user = response.data;\n        await AsyncStorage.default.setItem('userId', user.id);\n        set({\n          user,\n          loading: false\n        });\n\n        // Load affinities\n        await get().loadAffinities(user.id);\n      } catch (error) {\n        set({\n          loading: false,\n          error: error.message\n        });\n      }\n    },\n    loadUser: async userId => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/user/${userId}`);\n        set({\n          user: response.data\n        });\n\n        // Load affinities\n        await get().loadAffinities(userId);\n      } catch (error) {\n        set({\n          error: error.message\n        });\n      }\n    },\n    loadNPCs: async () => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/npcs`);\n        set({\n          npcs: response.data\n        });\n      } catch (error) {\n        set({\n          error: error.message\n        });\n      }\n    },\n    loadAffinities: async userId => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/affinity/${userId}`);\n        set({\n          affinities: response.data\n        });\n      } catch (error) {\n        set({\n          error: error.message\n        });\n      }\n    },\n    addFriend: async npcId => {\n      const {\n        user\n      } = get();\n      if (!user) return;\n      try {\n        await axios.default.post(`${API_URL}/api/affinity/${user.id}/${npcId}/friend`);\n\n        // Reload affinities\n        await get().loadAffinities(user.id);\n      } catch (error) {\n        set({\n          error: error.message\n        });\n      }\n    },\n    updateUserPosition: async (floor, room) => {\n      const {\n        user\n      } = get();\n      if (!user) return;\n      try {\n        await axios.default.put(`${API_URL}/api/user/${user.id}/position?floor=${floor}&room=${room}`);\n        set({\n          user: {\n            ...user,\n            current_floor: floor,\n            current_room: room\n          }\n        });\n      } catch (error) {\n        set({\n          error: error.message\n        });\n      }\n    }\n  }));\n});","lineCount":161,"map":[[12,2,56,0,"Object"],[12,8,56,0],[12,9,56,0,"defineProperty"],[12,23,56,0],[12,24,56,0,"exports"],[12,31,56,0],[13,4,56,0,"enumerable"],[13,14,56,0],[14,4,56,0,"get"],[14,7,56,0],[14,18,56,0,"get"],[14,19,56,0],[15,6,56,0],[15,13,56,0,"useGameStore"],[15,25,56,0],[16,4,56,0],[17,2,56,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_axios"],[21,12,3,0],[21,15,3,0,"require"],[21,22,3,0],[21,23,3,0,"_dependencyMap"],[21,37,3,0],[22,2,3,0],[22,6,3,0,"axios"],[22,11,3,0],[22,14,3,0,"_interopDefault"],[22,29,3,0],[22,30,3,0,"_axios"],[22,36,3,0],[23,2,4,0],[23,6,4,0,"_expoConstants"],[23,20,4,0],[23,23,4,0,"require"],[23,30,4,0],[23,31,4,0,"_dependencyMap"],[23,45,4,0],[24,2,4,0],[24,6,4,0,"Constants"],[24,15,4,0],[24,18,4,0,"_interopDefault"],[24,33,4,0],[24,34,4,0,"_expoConstants"],[24,48,4,0],[25,2,6,0],[25,8,6,6,"API_URL"],[25,15,6,13],[25,18,6,16,"Constants"],[25,27,6,25],[25,28,6,25,"default"],[25,35,6,25],[25,36,6,26,"expoConfig"],[25,46,6,36],[25,48,6,38,"extra"],[25,53,6,43],[25,55,6,45,"EXPO_PUBLIC_BACKEND_URL"],[25,78,6,68],[25,82,6,72,"process"],[25,89,6,79],[25,90,6,80,"env"],[25,93,6,83],[25,94,6,84,"EXPO_PUBLIC_BACKEND_URL"],[25,117,6,107],[26,2,56,7],[26,8,56,13,"useGameStore"],[26,20,56,25],[26,23,56,28],[26,27,56,28,"create"],[26,35,56,34],[26,36,56,34,"create"],[26,42,56,34],[26,44,56,46],[26,45,56,47,"set"],[26,48,56,50],[26,50,56,52,"get"],[26,53,56,55],[26,59,56,61],[27,4,57,2,"user"],[27,8,57,6],[27,10,57,8],[27,14,57,12],[28,4,58,2,"npcs"],[28,8,58,6],[28,10,58,8],[28,12,58,10],[29,4,59,2,"affinities"],[29,14,59,12],[29,16,59,14],[29,18,59,16],[30,4,60,2,"loading"],[30,11,60,9],[30,13,60,11],[30,18,60,16],[31,4,61,2,"error"],[31,9,61,7],[31,11,61,9],[31,15,61,13],[32,4,63,2,"initialize"],[32,14,63,12],[32,16,63,14],[32,22,63,14,"initialize"],[32,23,63,14],[32,28,63,26],[33,6,64,4],[33,10,64,8],[34,8,65,6,"set"],[34,11,65,9],[34,12,65,10],[35,10,65,12,"loading"],[35,17,65,19],[35,19,65,21],[35,23,65,25],[36,10,65,27,"error"],[36,15,65,32],[36,17,65,34],[37,8,65,39],[37,9,65,40],[37,10,65,41],[39,8,67,6],[40,8,68,6],[40,14,68,12,"storedUserId"],[40,26,68,24],[40,29,68,27],[40,35,68,33,"AsyncStorage"],[40,47,68,45],[40,48,68,45,"default"],[40,55,68,45],[40,56,68,46,"getItem"],[40,63,68,53],[40,64,68,54],[40,72,68,62],[40,73,68,63],[41,8,70,6],[41,12,70,10,"storedUserId"],[41,24,70,22],[41,26,70,24],[42,10,71,8],[42,16,71,14,"get"],[42,19,71,17],[42,20,71,18],[42,21,71,19],[42,22,71,20,"loadUser"],[42,30,71,28],[42,31,71,29,"storedUserId"],[42,43,71,41],[42,44,71,42],[43,8,72,6],[45,8,74,6],[46,8,75,6],[46,14,75,12,"axios"],[46,19,75,17],[46,20,75,17,"default"],[46,27,75,17],[46,28,75,18,"post"],[46,32,75,22],[46,33,75,23],[46,36,75,26,"API_URL"],[46,43,75,33],[46,59,75,49],[46,60,75,50],[48,8,77,6],[49,8,78,6],[49,14,78,12,"get"],[49,17,78,15],[49,18,78,16],[49,19,78,17],[49,20,78,18,"loadNPCs"],[49,28,78,26],[49,29,78,27],[49,30,78,28],[50,8,80,6,"set"],[50,11,80,9],[50,12,80,10],[51,10,80,12,"loading"],[51,17,80,19],[51,19,80,21],[52,8,80,27],[52,9,80,28],[52,10,80,29],[53,6,81,4],[53,7,81,5],[53,8,81,6],[53,15,81,13,"error"],[53,20,81,23],[53,22,81,25],[54,8,82,6,"set"],[54,11,82,9],[54,12,82,10],[55,10,82,12,"loading"],[55,17,82,19],[55,19,82,21],[55,24,82,26],[56,10,82,28,"error"],[56,15,82,33],[56,17,82,35,"error"],[56,22,82,40],[56,23,82,41,"message"],[57,8,82,49],[57,9,82,50],[57,10,82,51],[58,6,83,4],[59,4,84,2],[59,5,84,3],[60,4,86,2,"createUser"],[60,14,86,12],[60,16,86,14],[60,22,86,21,"username"],[60,30,86,37],[60,34,86,42],[61,6,87,4],[61,10,87,8],[62,8,88,6,"set"],[62,11,88,9],[62,12,88,10],[63,10,88,12,"loading"],[63,17,88,19],[63,19,88,21],[63,23,88,25],[64,10,88,27,"error"],[64,15,88,32],[64,17,88,34],[65,8,88,39],[65,9,88,40],[65,10,88,41],[66,8,90,6],[66,14,90,12,"response"],[66,22,90,20],[66,25,90,23],[66,31,90,29,"axios"],[66,36,90,34],[66,37,90,34,"default"],[66,44,90,34],[66,45,90,35,"post"],[66,49,90,39],[66,50,90,40],[66,53,90,43,"API_URL"],[66,60,90,50],[66,78,90,68],[66,80,90,70],[67,10,91,8,"username"],[68,8,92,6],[68,9,92,7],[68,10,92,8],[69,8,94,6],[69,14,94,12,"user"],[69,18,94,16],[69,21,94,19,"response"],[69,29,94,27],[69,30,94,28,"data"],[69,34,94,32],[70,8,95,6],[70,14,95,12,"AsyncStorage"],[70,26,95,24],[70,27,95,24,"default"],[70,34,95,24],[70,35,95,25,"setItem"],[70,42,95,32],[70,43,95,33],[70,51,95,41],[70,53,95,43,"user"],[70,57,95,47],[70,58,95,48,"id"],[70,60,95,50],[70,61,95,51],[71,8,97,6,"set"],[71,11,97,9],[71,12,97,10],[72,10,97,12,"user"],[72,14,97,16],[73,10,97,18,"loading"],[73,17,97,25],[73,19,97,27],[74,8,97,33],[74,9,97,34],[74,10,97,35],[76,8,99,6],[77,8,100,6],[77,14,100,12,"get"],[77,17,100,15],[77,18,100,16],[77,19,100,17],[77,20,100,18,"loadAffinities"],[77,34,100,32],[77,35,100,33,"user"],[77,39,100,37],[77,40,100,38,"id"],[77,42,100,40],[77,43,100,41],[78,6,101,4],[78,7,101,5],[78,8,101,6],[78,15,101,13,"error"],[78,20,101,23],[78,22,101,25],[79,8,102,6,"set"],[79,11,102,9],[79,12,102,10],[80,10,102,12,"loading"],[80,17,102,19],[80,19,102,21],[80,24,102,26],[81,10,102,28,"error"],[81,15,102,33],[81,17,102,35,"error"],[81,22,102,40],[81,23,102,41,"message"],[82,8,102,49],[82,9,102,50],[82,10,102,51],[83,6,103,4],[84,4,104,2],[84,5,104,3],[85,4,106,2,"loadUser"],[85,12,106,10],[85,14,106,12],[85,20,106,19,"userId"],[85,26,106,33],[85,30,106,38],[86,6,107,4],[86,10,107,8],[87,8,108,6],[87,14,108,12,"response"],[87,22,108,20],[87,25,108,23],[87,31,108,29,"axios"],[87,36,108,34],[87,37,108,34,"default"],[87,44,108,34],[87,45,108,35,"get"],[87,48,108,38],[87,49,108,39],[87,52,108,42,"API_URL"],[87,59,108,49],[87,72,108,62,"userId"],[87,78,108,68],[87,80,108,70],[87,81,108,71],[88,8,109,6,"set"],[88,11,109,9],[88,12,109,10],[89,10,109,12,"user"],[89,14,109,16],[89,16,109,18,"response"],[89,24,109,26],[89,25,109,27,"data"],[90,8,109,32],[90,9,109,33],[90,10,109,34],[92,8,111,6],[93,8,112,6],[93,14,112,12,"get"],[93,17,112,15],[93,18,112,16],[93,19,112,17],[93,20,112,18,"loadAffinities"],[93,34,112,32],[93,35,112,33,"userId"],[93,41,112,39],[93,42,112,40],[94,6,113,4],[94,7,113,5],[94,8,113,6],[94,15,113,13,"error"],[94,20,113,23],[94,22,113,25],[95,8,114,6,"set"],[95,11,114,9],[95,12,114,10],[96,10,114,12,"error"],[96,15,114,17],[96,17,114,19,"error"],[96,22,114,24],[96,23,114,25,"message"],[97,8,114,33],[97,9,114,34],[97,10,114,35],[98,6,115,4],[99,4,116,2],[99,5,116,3],[100,4,118,2,"loadNPCs"],[100,12,118,10],[100,14,118,12],[100,20,118,12,"loadNPCs"],[100,21,118,12],[100,26,118,24],[101,6,119,4],[101,10,119,8],[102,8,120,6],[102,14,120,12,"response"],[102,22,120,20],[102,25,120,23],[102,31,120,29,"axios"],[102,36,120,34],[102,37,120,34,"default"],[102,44,120,34],[102,45,120,35,"get"],[102,48,120,38],[102,49,120,39],[102,52,120,42,"API_URL"],[102,59,120,49],[102,70,120,60],[102,71,120,61],[103,8,121,6,"set"],[103,11,121,9],[103,12,121,10],[104,10,121,12,"npcs"],[104,14,121,16],[104,16,121,18,"response"],[104,24,121,26],[104,25,121,27,"data"],[105,8,121,32],[105,9,121,33],[105,10,121,34],[106,6,122,4],[106,7,122,5],[106,8,122,6],[106,15,122,13,"error"],[106,20,122,23],[106,22,122,25],[107,8,123,6,"set"],[107,11,123,9],[107,12,123,10],[108,10,123,12,"error"],[108,15,123,17],[108,17,123,19,"error"],[108,22,123,24],[108,23,123,25,"message"],[109,8,123,33],[109,9,123,34],[109,10,123,35],[110,6,124,4],[111,4,125,2],[111,5,125,3],[112,4,127,2,"loadAffinities"],[112,18,127,16],[112,20,127,18],[112,26,127,25,"userId"],[112,32,127,39],[112,36,127,44],[113,6,128,4],[113,10,128,8],[114,8,129,6],[114,14,129,12,"response"],[114,22,129,20],[114,25,129,23],[114,31,129,29,"axios"],[114,36,129,34],[114,37,129,34,"default"],[114,44,129,34],[114,45,129,35,"get"],[114,48,129,38],[114,49,129,39],[114,52,129,42,"API_URL"],[114,59,129,49],[114,76,129,66,"userId"],[114,82,129,72],[114,84,129,74],[114,85,129,75],[115,8,130,6,"set"],[115,11,130,9],[115,12,130,10],[116,10,130,12,"affinities"],[116,20,130,22],[116,22,130,24,"response"],[116,30,130,32],[116,31,130,33,"data"],[117,8,130,38],[117,9,130,39],[117,10,130,40],[118,6,131,4],[118,7,131,5],[118,8,131,6],[118,15,131,13,"error"],[118,20,131,23],[118,22,131,25],[119,8,132,6,"set"],[119,11,132,9],[119,12,132,10],[120,10,132,12,"error"],[120,15,132,17],[120,17,132,19,"error"],[120,22,132,24],[120,23,132,25,"message"],[121,8,132,33],[121,9,132,34],[121,10,132,35],[122,6,133,4],[123,4,134,2],[123,5,134,3],[124,4,136,2,"addFriend"],[124,13,136,11],[124,15,136,13],[124,21,136,20,"npcId"],[124,26,136,33],[124,30,136,38],[125,6,137,4],[125,12,137,10],[126,8,137,12,"user"],[127,6,137,17],[127,7,137,18],[127,10,137,21,"get"],[127,13,137,24],[127,14,137,25],[127,15,137,26],[128,6,138,4],[128,10,138,8],[128,11,138,9,"user"],[128,15,138,13],[128,17,138,15],[129,6,140,4],[129,10,140,8],[130,8,141,6],[130,14,141,12,"axios"],[130,19,141,17],[130,20,141,17,"default"],[130,27,141,17],[130,28,141,18,"post"],[130,32,141,22],[130,33,141,23],[130,36,141,26,"API_URL"],[130,43,141,33],[130,60,141,50,"user"],[130,64,141,54],[130,65,141,55,"id"],[130,67,141,57],[130,71,141,61,"npcId"],[130,76,141,66],[130,85,141,75],[130,86,141,76],[132,8,143,6],[133,8,144,6],[133,14,144,12,"get"],[133,17,144,15],[133,18,144,16],[133,19,144,17],[133,20,144,18,"loadAffinities"],[133,34,144,32],[133,35,144,33,"user"],[133,39,144,37],[133,40,144,38,"id"],[133,42,144,40],[133,43,144,41],[134,6,145,4],[134,7,145,5],[134,8,145,6],[134,15,145,13,"error"],[134,20,145,23],[134,22,145,25],[135,8,146,6,"set"],[135,11,146,9],[135,12,146,10],[136,10,146,12,"error"],[136,15,146,17],[136,17,146,19,"error"],[136,22,146,24],[136,23,146,25,"message"],[137,8,146,33],[137,9,146,34],[137,10,146,35],[138,6,147,4],[139,4,148,2],[139,5,148,3],[140,4,150,2,"updateUserPosition"],[140,22,150,20],[140,24,150,22],[140,30,150,22,"updateUserPosition"],[140,31,150,29,"floor"],[140,36,150,42],[140,38,150,44,"room"],[140,42,150,56],[140,47,150,61],[141,6,151,4],[141,12,151,10],[142,8,151,12,"user"],[143,6,151,17],[143,7,151,18],[143,10,151,21,"get"],[143,13,151,24],[143,14,151,25],[143,15,151,26],[144,6,152,4],[144,10,152,8],[144,11,152,9,"user"],[144,15,152,13],[144,17,152,15],[145,6,154,4],[145,10,154,8],[146,8,155,6],[146,14,155,12,"axios"],[146,19,155,17],[146,20,155,17,"default"],[146,27,155,17],[146,28,155,18,"put"],[146,31,155,21],[146,32,155,22],[146,35,155,25,"API_URL"],[146,42,155,32],[146,55,155,45,"user"],[146,59,155,49],[146,60,155,50,"id"],[146,62,155,52],[146,81,155,71,"floor"],[146,86,155,76],[146,95,155,85,"room"],[146,99,155,89],[146,101,155,91],[146,102,155,92],[147,8,156,6,"set"],[147,11,156,9],[147,12,156,10],[148,10,156,12,"user"],[148,14,156,16],[148,16,156,18],[149,12,156,20],[149,15,156,23,"user"],[149,19,156,27],[150,12,156,29,"current_floor"],[150,25,156,42],[150,27,156,44,"floor"],[150,32,156,49],[151,12,156,51,"current_room"],[151,24,156,63],[151,26,156,65,"room"],[152,10,156,70],[153,8,156,72],[153,9,156,73],[153,10,156,74],[154,6,157,4],[154,7,157,5],[154,8,157,6],[154,15,157,13,"error"],[154,20,157,23],[154,22,157,25],[155,8,158,6,"set"],[155,11,158,9],[155,12,158,10],[156,10,158,12,"error"],[156,15,158,17],[156,17,158,19,"error"],[156,22,158,24],[156,23,158,25,"message"],[157,8,158,33],[157,9,158,34],[157,10,158,35],[158,6,159,4],[159,4,160,2],[160,2,161,0],[160,3,161,1],[160,4,161,2],[160,5,161,3],[161,0,161,4],[161,3]],"functionMap":{"names":["<global>","create$argument_0","initialize","createUser","loadUser","loadNPCs","loadAffinities","addFriend","updateUserPosition"],"mappings":"AAA;8CCuD;cCO;GDqB;cEE;GFkB;YGE;GHU;YIE;GJO;kBKE;GLO;aME;GNY;sBOE;GPU;EDC"},"hasCjsExports":false},"type":"js/module"}]}